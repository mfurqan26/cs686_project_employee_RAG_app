// This is your Prisma schema file,

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Business {
  id        String   @id @default(cuid())
  name      String
  NAICSId   Int?
  naics     NAICS?   @relation(fields: [NAICSId], references: [code])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model NAICS {
  code      Int        @id
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  name      String
  Business  Business[]
  NAICSDescriptor NAICSDescriptor[]
}

model NAICSDescriptor {  
  naicsId    Int
  naics      NAICS       @relation(fields: [naicsId], references: [code])
  content    String
  category   NAICSDescriptorCategory[]
  @@unique([content, naicsId])
}

enum NAICSDescriptorCategory {
  DEFINITION
  ILLUSTRATIVE_EXAMPLE
  EXAMPLE
  INCLUSION
  EXCLUSION
}

model NOC {
  code       String     @id
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  level      Int
  title      String
  definition String
}